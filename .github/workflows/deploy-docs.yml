name: Deploy Documentation to GitHub Pages

"on":
  push:
    branches: [main]
    paths:
      - 'docs/**'
      - 'src/**/*.py'
      - 'context7.json'
      - '.github/workflows/deploy-docs.yml'
  workflow_dispatch:  # Allow manual deployment

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

# Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.
# However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # Build job
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Full history for proper documentation generation

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
          cache: 'pip'

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -e .
          pip install -r requirements.txt
          # Install documentation dependencies
          pip install mkdocs mkdocs-material mkdocs-mermaid2-plugin

      - name: Generate Context7 documentation
        run: |
          echo "üîÑ Generating Context7 documentation..."
          python scripts/generate_context7_docs.py
          python scripts/generate_context7_cli_docs.py

      - name: Create documentation version
        run: |
          echo "üîÑ Creating documentation version..."
          
          # Get version from package
          VERSION=$(python -c "import sys; sys.path.insert(0, 'src'); from fqcn_converter import __version__; print(__version__)")
          echo "Creating version: $VERSION"
          
          # Create version using version manager
          python scripts/manage_doc_versions.py create "$VERSION" --title "Version $VERSION"

      - name: Setup Pages
        uses: actions/configure-pages@v4

      - name: Create documentation site structure
        run: |
          echo "üèóÔ∏è Creating documentation site structure..."
          
          # Create site directory
          mkdir -p site
          
          # Create main index page
          cat > site/index.html << 'EOF'
          <!DOCTYPE html>
          <html lang="en">
          <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>Ansible FQCN Converter Documentation</title>
              <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
              <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css">
              <style>
                  .sidebar { min-height: calc(100vh - 4rem); }
                  .content { max-width: none; }
                  .nav-link:hover { background-color: #f3f4f6; }
                  .nav-link.active { background-color: #3b82f6; color: white; }
              </style>
          </head>
          <body class="bg-gray-50">
              <nav class="bg-white shadow-sm border-b">
                  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                      <div class="flex justify-between h-16">
                          <div class="flex items-center">
                              <h1 class="text-xl font-semibold text-gray-900">
                                  üìö Ansible FQCN Converter Documentation
                              </h1>
                          </div>
                          <div class="flex items-center space-x-4">
                              <span class="text-sm text-gray-500">v0.1.0</span>
                              <a href="https://github.com/org/ansible-fqcn-converter" 
                                 class="text-gray-500 hover:text-gray-700">
                                  <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                      <path fill-rule="evenodd" d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z" clip-rule="evenodd"></path>
                                  </svg>
                              </a>
                          </div>
                      </div>
                  </div>
              </nav>

              <div class="flex">
                  <!-- Sidebar -->
                  <div class="w-64 bg-white shadow-sm sidebar">
                      <div class="p-4">
                          <nav class="space-y-2">
                              <a href="#overview" class="nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-700">
                                  üè† Overview
                              </a>
                              <a href="#installation" class="nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-700">
                                  üì¶ Installation
                              </a>
                              <a href="#quick-start" class="nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-700">
                                  üöÄ Quick Start
                              </a>
                              
                              <div class="pt-4">
                                  <h3 class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">
                                      User Guide
                                  </h3>
                                  <div class="mt-2 space-y-1">
                                      <a href="cli.html" class="nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-700">
                                          üíª CLI Reference
                                      </a>
                                      <a href="api.html" class="nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-700">
                                          üîß API Reference
                                      </a>
                                  </div>
                              </div>
                              
                              <div class="pt-4">
                                  <h3 class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">
                                      Examples
                                  </h3>
                                  <div class="mt-2 space-y-1">
                                      <a href="examples.html" class="nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-700">
                                          üìù Usage Examples
                                      </a>
                                      <a href="troubleshooting.html" class="nav-link block px-3 py-2 rounded-md text-sm font-medium text-gray-700">
                                          üîç Troubleshooting
                                      </a>
                                  </div>
                              </div>
                          </nav>
                      </div>
                  </div>

                  <!-- Main content -->
                  <div class="flex-1 p-8">
                      <div class="max-w-4xl">
                          <section id="overview">
                              <h2 class="text-3xl font-bold text-gray-900 mb-6">
                                  Ansible FQCN Converter
                              </h2>
                              
                              <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8">
                                  <div class="flex">
                                      <div class="flex-shrink-0">
                                          <svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                                              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                          </svg>
                                      </div>
                                      <div class="ml-3">
                                          <h3 class="text-sm font-medium text-blue-800">
                                              Production-Ready FQCN Conversion Tool
                                          </h3>
                                          <div class="mt-2 text-sm text-blue-700">
                                              <p>A comprehensive tool for converting Ansible playbooks to use Fully Qualified Collection Names (FQCNs) with robust error handling, configurable mappings, and comprehensive validation.</p>
                                          </div>
                                      </div>
                                  </div>
                              </div>

                              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                  <div class="bg-white rounded-lg shadow p-6">
                                      <h3 class="text-lg font-semibold text-gray-900 mb-3">üéØ Key Features</h3>
                                      <ul class="space-y-2 text-sm text-gray-600">
                                          <li>‚Ä¢ Intelligent module detection and conversion</li>
                                          <li>‚Ä¢ Configurable FQCN mappings</li>
                                          <li>‚Ä¢ Backup file creation for safety</li>
                                          <li>‚Ä¢ Dry-run mode for previewing changes</li>
                                          <li>‚Ä¢ Comprehensive error reporting</li>
                                          <li>‚Ä¢ Batch processing with parallel execution</li>
                                      </ul>
                                  </div>
                                  
                                  <div class="bg-white rounded-lg shadow p-6">
                                      <h3 class="text-lg font-semibold text-gray-900 mb-3">üõ†Ô∏è Use Cases</h3>
                                      <ul class="space-y-2 text-sm text-gray-600">
                                          <li>‚Ä¢ Migrating legacy Ansible playbooks</li>
                                          <li>‚Ä¢ Ensuring Ansible 2.10+ compatibility</li>
                                          <li>‚Ä¢ CI/CD integration for compliance</li>
                                          <li>‚Ä¢ Large-scale organizational migrations</li>
                                          <li>‚Ä¢ Quality assurance and validation</li>
                                          <li>‚Ä¢ Automated compliance checking</li>
                                      </ul>
                                  </div>
                              </div>
                          </section>

                          <section id="installation" class="mb-8">
                              <h2 class="text-2xl font-bold text-gray-900 mb-4">Installation</h2>
                              
                              <div class="bg-gray-900 rounded-lg p-4 mb-4">
                                  <pre class="text-green-400 text-sm"><code># Install from GitHub (only available method)
          pip install git+https://github.com/mhtalci/ansible-fqcn-converter.git

          # Install from source
          git clone https://github.com/mhtalci/ansible-fqcn-converter.git
          cd ansible-fqcn-converter
          pip install -e .</code></pre>
                              </div>
                          </section>

                          <section id="quick-start" class="mb-8">
                              <h2 class="text-2xl font-bold text-gray-900 mb-4">Quick Start</h2>
                              
                              <div class="space-y-4">
                                  <div>
                                      <h3 class="text-lg font-semibold text-gray-900 mb-2">Convert a single file</h3>
                                      <div class="bg-gray-900 rounded-lg p-4">
                                          <pre class="text-green-400 text-sm"><code>fqcn-converter convert playbook.yml</code></pre>
                                      </div>
                                  </div>
                                  
                                  <div>
                                      <h3 class="text-lg font-semibold text-gray-900 mb-2">Validate conversion</h3>
                                      <div class="bg-gray-900 rounded-lg p-4">
                                          <pre class="text-green-400 text-sm"><code>fqcn-converter validate --score playbook.yml</code></pre>
                                      </div>
                                  </div>
                                  
                                  <div>
                                      <h3 class="text-lg font-semibold text-gray-900 mb-2">Batch process multiple projects</h3>
                                      <div class="bg-gray-900 rounded-lg p-4">
                                          <pre class="text-green-400 text-sm"><code>fqcn-converter batch /path/to/ansible/projects</code></pre>
                                      </div>
                                  </div>
                              </div>
                          </section>

                          <div class="bg-gray-100 rounded-lg p-6 mt-8">
                              <h3 class="text-lg font-semibold text-gray-900 mb-3">üìñ Documentation Sections</h3>
                              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                  <a href="cli.html" class="block p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow">
                                      <h4 class="font-semibold text-blue-600">CLI Reference</h4>
                                      <p class="text-sm text-gray-600 mt-1">Complete command-line interface documentation</p>
                                  </a>
                                  <a href="api.html" class="block p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow">
                                      <h4 class="font-semibold text-blue-600">API Reference</h4>
                                      <p class="text-sm text-gray-600 mt-1">Python API documentation and examples</p>
                                  </a>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>

              <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
              <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
              <script>
                  // Simple navigation highlighting
                  document.addEventListener('DOMContentLoaded', function() {
                      const links = document.querySelectorAll('.nav-link');
                      links.forEach(link => {
                          link.addEventListener('click', function(e) {
                              links.forEach(l => l.classList.remove('active'));
                              this.classList.add('active');
                          });
                      });
                  });
              </script>
          </body>
          </html>
          EOF

      - name: Convert markdown to HTML
        run: |
          echo "üîÑ Converting markdown documentation to HTML..."
          
          # Install markdown converter
          pip install markdown markdown-extensions pygments
          
          # Create HTML conversion script
          cat > convert_docs.py << 'EOF'
          import markdown
          import os
          from pathlib import Path
          
          def convert_md_to_html(md_file, output_file, title):
              """Convert markdown file to HTML with styling."""
              
              # Read markdown content
              with open(md_file, 'r', encoding='utf-8') as f:
                  md_content = f.read()
              
              # Configure markdown with extensions
              md = markdown.Markdown(extensions=[
                  'codehilite',
                  'fenced_code',
                  'tables',
                  'toc'
              ])
              
              # Convert to HTML
              html_content = md.convert(md_content)
              
              # Create full HTML page
              full_html = f'''<!DOCTYPE html>
          <html lang="en">
          <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>{title} - Ansible FQCN Converter</title>
              <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
              <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css">
              <style>
                  .markdown-body {{ max-width: none; }}
                  .markdown-body h1 {{ font-size: 2rem; font-weight: bold; margin-bottom: 1rem; }}
                  .markdown-body h2 {{ font-size: 1.5rem; font-weight: bold; margin-top: 2rem; margin-bottom: 1rem; }}
                  .markdown-body h3 {{ font-size: 1.25rem; font-weight: bold; margin-top: 1.5rem; margin-bottom: 0.5rem; }}
                  .markdown-body pre {{ background-color: #f8f9fa; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }}
                  .markdown-body code {{ background-color: #f1f3f4; padding: 0.2rem 0.4rem; border-radius: 0.25rem; font-size: 0.875rem; }}
                  .markdown-body table {{ width: 100%; border-collapse: collapse; margin: 1rem 0; }}
                  .markdown-body th, .markdown-body td {{ border: 1px solid #e5e7eb; padding: 0.5rem; text-align: left; }}
                  .markdown-body th {{ background-color: #f9fafb; font-weight: bold; }}
              </style>
          </head>
          <body class="bg-gray-50">
              <nav class="bg-white shadow-sm border-b">
                  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                      <div class="flex justify-between h-16">
                          <div class="flex items-center">
                              <a href="index.html" class="text-xl font-semibold text-gray-900">
                                  üìö Ansible FQCN Converter
                              </a>
                              <span class="ml-4 text-sm text-gray-500">/ {title}</span>
                          </div>
                          <div class="flex items-center">
                              <a href="index.html" class="text-sm text-gray-500 hover:text-gray-700 mr-4">‚Üê Back to Docs</a>
                          </div>
                      </div>
                  </div>
              </nav>
              
              <div class="max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
                  <div class="markdown-body bg-white rounded-lg shadow p-8">
                      {html_content}
                  </div>
              </div>
          </body>
          </html>'''
              
              # Write HTML file
              with open(output_file, 'w', encoding='utf-8') as f:
                  f.write(full_html)
          
          # Convert documentation files
          docs_to_convert = [
              ('docs/usage/cli_reference.md', 'site/cli.html', 'CLI Reference'),
              ('docs/reference/api/api_reference.md', 'site/api.html', 'API Reference'),
          ]
          
          for md_file, html_file, title in docs_to_convert:
              if os.path.exists(md_file):
                  convert_md_to_html(md_file, html_file, title)
                  print(f"‚úÖ Converted {md_file} to {html_file}")
              else:
                  print(f"‚ö†Ô∏è  File not found: {md_file}")
          EOF
          
          python convert_docs.py

      - name: Create additional documentation pages
        run: |
          echo "üìÑ Creating additional documentation pages..."
          
          # Create examples page
          cat > site/examples.html << 'EOF'
          <!DOCTYPE html>
          <html lang="en">
          <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>Usage Examples - Ansible FQCN Converter</title>
              <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
              <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css">
          </head>
          <body class="bg-gray-50">
              <nav class="bg-white shadow-sm border-b">
                  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                      <div class="flex justify-between h-16">
                          <div class="flex items-center">
                              <a href="index.html" class="text-xl font-semibold text-gray-900">
                                  üìö Ansible FQCN Converter
                              </a>
                              <span class="ml-4 text-sm text-gray-500">/ Usage Examples</span>
                          </div>
                          <div class="flex items-center">
                              <a href="index.html" class="text-sm text-gray-500 hover:text-gray-700 mr-4">‚Üê Back to Docs</a>
                          </div>
                      </div>
                  </div>
              </nav>
              
              <div class="max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
                  <div class="bg-white rounded-lg shadow p-8">
                      <h1 class="text-3xl font-bold text-gray-900 mb-6">Usage Examples</h1>
                      
                      <div class="space-y-8">
                          <section>
                              <h2 class="text-2xl font-bold text-gray-900 mb-4">Basic Conversion</h2>
                              <p class="text-gray-600 mb-4">Convert a single Ansible playbook to FQCN format:</p>
                              <div class="bg-gray-900 rounded-lg p-4">
                                  <pre class="text-green-400 text-sm"><code>fqcn-converter convert playbook.yml</code></pre>
                              </div>
                          </section>
                          
                          <section>
                              <h2 class="text-2xl font-bold text-gray-900 mb-4">Validation and Scoring</h2>
                              <p class="text-gray-600 mb-4">Check FQCN compliance and get detailed scores:</p>
                              <div class="bg-gray-900 rounded-lg p-4">
                                  <pre class="text-green-400 text-sm"><code>fqcn-converter validate --score --report report.json roles/</code></pre>
                              </div>
                          </section>
                          
                          <section>
                              <h2 class="text-2xl font-bold text-gray-900 mb-4">Batch Processing</h2>
                              <p class="text-gray-600 mb-4">Process multiple Ansible projects in parallel:</p>
                              <div class="bg-gray-900 rounded-lg p-4">
                                  <pre class="text-green-400 text-sm"><code>fqcn-converter batch --workers 8 /path/to/ansible/projects</code></pre>
                              </div>
                          </section>
                      </div>
                  </div>
              </div>
          </body>
          </html>
          EOF
          
          # Copy CNAME file if custom domain is configured
          if [ -f "docs/CNAME" ] && grep -v "^#" docs/CNAME | grep -q "."; then
            cp docs/CNAME site/CNAME
            echo "‚úÖ Copied custom domain configuration"
          fi
          
          # Create troubleshooting page
          cat > site/troubleshooting.html << 'EOF'
          <!DOCTYPE html>
          <html lang="en">
          <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>Troubleshooting - Ansible FQCN Converter</title>
              <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
          </head>
          <body class="bg-gray-50">
              <nav class="bg-white shadow-sm border-b">
                  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                      <div class="flex justify-between h-16">
                          <div class="flex items-center">
                              <a href="index.html" class="text-xl font-semibold text-gray-900">
                                  üìö Ansible FQCN Converter
                              </a>
                              <span class="ml-4 text-sm text-gray-500">/ Troubleshooting</span>
                          </div>
                          <div class="flex items-center">
                              <a href="index.html" class="text-sm text-gray-500 hover:text-gray-700 mr-4">‚Üê Back to Docs</a>
                          </div>
                      </div>
                  </div>
              </nav>
              
              <div class="max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
                  <div class="bg-white rounded-lg shadow p-8">
                      <h1 class="text-3xl font-bold text-gray-900 mb-6">Troubleshooting</h1>
                      
                      <div class="space-y-6">
                          <div class="border-l-4 border-red-400 bg-red-50 p-4">
                              <h3 class="font-semibold text-red-800">Command not found: fqcn-converter</h3>
                              <p class="text-red-700 mt-1">Install with 'pip install git+https://github.com/mhtalci/ansible_fqcn_converter.git' or run from project directory</p>
                          </div>
                          
                          <div class="border-l-4 border-yellow-400 bg-yellow-50 p-4">
                              <h3 class="font-semibold text-yellow-800">Permission denied when converting files</h3>
                              <p class="text-yellow-700 mt-1">Check file permissions or run with appropriate user privileges</p>
                          </div>
                          
                          <div class="border-l-4 border-blue-400 bg-blue-50 p-4">
                              <h3 class="font-semibold text-blue-800">YAML parsing errors during conversion</h3>
                              <p class="text-blue-700 mt-1">Fix YAML syntax errors before conversion, use --skip-validation to bypass</p>
                          </div>
                      </div>
                  </div>
              </div>
          </body>
          </html>
          EOF

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: ./site

  # Deployment job
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4

      - name: Create deployment summary
        run: |
          echo "## üöÄ Documentation Deployment Summary" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### Deployed Pages" >> $GITHUB_STEP_SUMMARY
          echo "- üè† **Main Documentation**: ${{ steps.deployment.outputs.page_url }}" >> $GITHUB_STEP_SUMMARY
          echo "- üíª **CLI Reference**: ${{ steps.deployment.outputs.page_url }}cli.html" >> $GITHUB_STEP_SUMMARY
          echo "- üîß **API Reference**: ${{ steps.deployment.outputs.page_url }}api.html" >> $GITHUB_STEP_SUMMARY
          echo "- üìù **Usage Examples**: ${{ steps.deployment.outputs.page_url }}examples.html" >> $GITHUB_STEP_SUMMARY
          echo "- üîç **Troubleshooting**: ${{ steps.deployment.outputs.page_url }}troubleshooting.html" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### Features" >> $GITHUB_STEP_SUMMARY
          echo "- ‚úÖ Context7-generated API documentation" >> $GITHUB_STEP_SUMMARY
          echo "- ‚úÖ Context7-generated CLI documentation" >> $GITHUB_STEP_SUMMARY
          echo "- ‚úÖ Interactive examples and troubleshooting" >> $GITHUB_STEP_SUMMARY
          echo "- ‚úÖ Responsive design with Tailwind CSS" >> $GITHUB_STEP_SUMMARY
          echo "- ‚úÖ Automatic deployment on documentation changes" >> $GITHUB_STEP_SUMMARY